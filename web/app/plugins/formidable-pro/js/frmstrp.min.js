(function(){if("undefined"===typeof window.frmProForm)return;var stripeLinkElementIsComplete=false;document.addEventListener("frmStripeLiteLoad",function(event){if("object"===typeof event.frmData.form)listenForSubmitButtonMutations(event.frmData.form)});document.addEventListener("frmStripeLitePaymentElementChange",function(event){stripeLinkElementIsComplete=event.frmData.complete});window.frmProForm.currentActionTypeShouldBeProcessed=function(action,args){var thisForm,saveDraft,isDraft;thisForm=args.thisForm;
if(frmProForm.goingToPreviousPage(thisForm))return false;saveDraft=frmProForm.savingDraft(thisForm);isDraft="update"===action&&saveDraft==="";if(isDraft)return true;return"create"===action&&saveDraft!==1};window.frmProForm.addAddressMeta=function($form,cardObject){var addressContainer,prefix,i,settings=frm_stripe_vars.settings,addressID="";for(i=0;i<settings.length;i++)addressID=settings[i].address;if(addressID==="")return cardObject;addressContainer=$form.find("#frm_field_"+addressID+"_container");
prefix="";if(!addressContainer.length){addressContainer=$form.find('input[name="item_meta['+addressID+'][line1]"]');if(addressContainer.length){prefix=addressID+"][";addressContainer=addressContainer.parent()}}if(addressContainer.length){addValToRequest(addressContainer,prefix+"line1",cardObject,"address_line1");addValToRequest(addressContainer,prefix+"line2",cardObject,"address_line2");addValToRequest(addressContainer,prefix+"city",cardObject,"address_city");addValToRequest(addressContainer,prefix+
"state",cardObject,"address_state");addValToRequest(addressContainer,prefix+"zip",cardObject,"address_zip")}};window.frmProForm.beforeConfirmPayment=function(params,meta){params.confirmParams.payment_method_data={billing_details:convertToAddressObject(meta)};return params};function convertToAddressObject(meta){var newMeta,k;newMeta={address:{}};for(k in meta){if(!meta.hasOwnProperty(k))continue;if(k==="address_zip")newMeta.address.postal_code=meta[k];else if(k.indexOf("address_")===0)newMeta.address[k.replace("address_",
"")]=meta[k];else newMeta[k]=meta[k]}return newMeta}function addValToRequest(container,inputName,cardObject,objectName){var input=container.find('input[name$="['+inputName+']"]');if(input.length&&input.val())cardObject[objectName]=input.val()}window.frmProForm.submitButtonIsConditionallyDisabled=function(form){var formId=parseInt(form.querySelector('[name="form_id"]').value);return submitButtonIsConditionallyDisabled(formId)};function listenForSubmitButtonMutations(form){var submitButton,observer;
submitButton=form.querySelector(".frm_button_submit");if(!submitButton)return;observer=new MutationObserver(function(mutations){each(mutations,handleMutation)});observer.observe(submitButton,{attributes:true});function handleMutation(mutation){if(mutation.attributeName==="disabled"&&!mutation.target.disabled&&!stripeLinkElementIsComplete)disableSubmit(form)}}function disableSubmit(form){jQuery(form).find('input[type="submit"],input[type="button"],button[type="submit"]').not(".frm_prev_page").attr("disabled",
"disabled")}function submitButtonIsConditionallyDisabled(formId){if("undefined"===typeof __FRMRULES||"object"!==typeof __FRMRULES["submit_"+formId])return false;return submitButtonIsConditionallyNotAvailable(formId)&&"disable"===__FRMRULES["submit_"+formId].hideDisable}function submitButtonIsConditionallyNotAvailable(formId){var hideFields=document.getElementById("frm_hide_fields_"+formId);return hideFields&&-1!==hideFields.value.indexOf('["frm_form_'+formId+'_container .frm_final_submit"]')}function each(items,
callback){var index,length;length=items.length;for(index=0;index<length;index++)if(false===callback(items[index],index))break}})();
